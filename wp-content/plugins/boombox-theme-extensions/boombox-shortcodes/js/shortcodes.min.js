jQuery((function(a){"use strict";var e=".bb-contact-form";if(a(e).length){var t=null,r=a(e).find("#boombox-contact-captcha");"image"===params.captcha_type?c(a(e),a(e).attr("action")):"google"===params.captcha_type?a("body").on("boombox/grecaptcha_loaded",(function(){null===t?t=grecaptcha.render(r.attr("id"),{sitekey:r.data("boombox-sitekey"),theme:"light"}):grecaptcha.reset(t)})):"google_v3"===params.captcha_type&&grecaptcha.ready((function(){grecaptcha.execute(r.data("boombox-sitekey")).then((function(a){document.getElementById("g-recaptcha-response-contact-form").value=a}))}))}function o(){if("image"===params.captcha_type)c(a(e),a(e).attr("action"));else{if("google"!==params.captcha_type)return!1;null===t?t=grecaptcha.render(r.attr("id"),{sitekey:r.data("sitekey"),theme:"light"}):grecaptcha.reset(t)}return!0}function c(a,e){a.find(".captcha").attr("src",params.captcha_file_url+"?"+Math.random()+"&type="+e).closest(".captcha-container").removeClass("loading")}a("body").on("submit",e,(function(e){e.preventDefault();var t=a(this),r=t.find("[name=boombox_name]"),c=t.find("[name=boombox_email]"),s=t.find("[name=boombox_comment]"),n=t.find("[name=boombox_gdpr]"),m=null,p=t.parent().find(".bb-contact-form-msg"),i=t.find("[name=submit]");"image"===params.captcha_type?m=t.find('[name="boombox_captcha_code"]'):"google"!==params.captcha_type&&"google_v3"!==params.captcha_type||(m=t.find('[name="g-recaptcha-response"]'));var l=m&&m.length?1:0;p.html("").removeClass("msg-error msg-success"),t.find(".error").removeClass("error"),i.attr("disabled","disabled");var d={action:"contact_form_submit",name:r.val(),email:c.val(),comment:s.val(),check_captcha:l};n.length&&(d.gdpr=n.is(":checked")?1:0),l&&(d.captcha=m.val()),a.post(params.ajax_url,d,(function(e){var n=a.parseJSON(e);if(a.isEmptyObject(n.valid))n.sent?(p.addClass("msg-success").html(params.success_message),t[0].reset(),l&&o()):p.addClass("msg-error").html(params.wrong_message);else{var d=n.message?n.message:params.error_message;p.addClass("msg-error").html(d),l&&o(),function(a,e,t,r,o){a.hasOwnProperty("name")&&!a.name&&e.addClass("error");a.hasOwnProperty("email")&&!a.email&&t.addClass("error");a.hasOwnProperty("comment")&&!a.comment&&r.addClass("error");a.hasOwnProperty("captcha")&&!a.captcha_code&&o.addClass("error")}(n.valid,r,c,s,m)}i.removeAttr("disabled")}))})),a("body").on("click",".boombox-refresh-captcha",(function(e){e.preventDefault();var t=a(this).closest("form"),r=t.attr("action");c(t,r)}))}));